%LaTeX convention card editor
%v1.0 - Gordon Bower - 17 December 2017
%v1.0.1 - 17 December 2017 - alignment fixes, a bunch of \regtexts and \boldtexts
%           moved into the style sheet and reduce typing in the template
%v1.0.2 - 17 May 2021 - Michael Farebrother - spelling fixes, change to 2021
%           alert rules
%v2.0 - 1 April 2022 - Michael Farebrother - complete rewrite for 2022 card.
%v2.1 - 18 February 2022 - Michael Farebrother - rewrite to anchor boxes and text to the label nodes.


%Fill out the fields in latex_cc_template.tex to create your own ACBL Convention Card in LaTeX

%This package contains all of the TikZ formatting to draw the card.
%It deliberately DOESNT hide anything with @-commands to make it easy to edit yourself.

\RequirePackage{tikz} %graphics tools. Also install ``ms'' package.
\RequirePackage{txfonts} %provides \varheartsuit and \vardiamondsuit
\RequirePackage{microtype} % allows us to stretch/shrink fonts to match
\RequirePackage[T1]{fontenc} % T1 font necessary to stretch and shrink
\RequirePackage{helvet} %provides Helvetica typeface
\RequirePackage{xifthen} %manipulate boolean values
\RequirePackage{xstring} %allow us to parse the opening-lead strings
\RequirePackage{xcolor} %red and blue
\RequirePackage{currfile} %get filename
\RequirePackage{texdate} %get date, formatted
\RequirePackage{bitset} %manipulate bitsets (used in \block)
\RequirePackage{substr} %find substrings (f.ex. Label, NoGuide)
\RequirePackage{relsize}
\RequirePackage{listofitems} %manage lists of items param as item1@item2...
\RequirePackage{lmodern}
\usepackage[utf8]{inputenc}
\usepackage{adjustbox}
\RequirePackage[left=0mm,right=5mm,top=5mm]{geometry}
\ProvidesPackage{acbl2022cc_2pages}

%Package initialization:

\makeatother %use @ as separator in \command1@\command2...

%texdate
\initcurrdate %texdate default date is curryear-01-01, this changes that to today

%Suit symbols:
\newcommand{\h}{\ensuremath{\varheartsuit}}
\newcommand{\rh}{\textcolor{red}{\ensuremath{\varheartsuit}}}
\renewcommand{\d}{\ensuremath{\vardiamondsuit}}
\newcommand{\rd}{\textcolor{red}{\ensuremath{\vardiamondsuit}}}
\newcommand{\s}{\ensuremath{\spadesuit}}
\newcommand{\bs}{\textcolor{black}{\ensuremath{\spadesuit}}}
\renewcommand{\c}{\ensuremath{\clubsuit}}
\newcommand{\bc}{\textcolor{black}{\ensuremath{\clubsuit}}}
%Sizes of text used on the convention card:
%Big suit symbols in opening bid section
\newcommand{\bigtext}[1]{\large {\textsf{\textbf{#1}}}}
\newcommand{\bigblue}[1]{\large {\textsf{\textbf{\textcolor{blue}{#1}}}}} % 1NT
%Headings for each block of the card
\newcommand{\headtext}[1]{\small {\textsf{\textbf{\textls[10]{#1}}}}}

%Inline template (non-user) text
\newcommand{\tRegtext}[1]{\footnotesize \textsf{\textls[-70]{#1}}}
\newcommand{\tRedreg}[1]{\footnotesize \textsf{\textls[-70]{\textcolor{red}{#1}}}}
\newcommand{\tBluereg}[1]{\footnotesize \textsf{\textls[-70]{\textcolor{blue}{#1}}}}
\newcommand{\tBlackreg}[1]{\footnotesize \textsf{\textls[-70]{\textcolor{black}{#1}}}}
\newcommand{\tBoldtext}[1]{\footnotesize \textsf{\textbf{\textls[-70]{#1}}}}
\newcommand{\tRedbold}[1]{\footnotesize \textsf{\textbf{\textls[-70]{\textcolor{red}{#1}}}}}
\newcommand{\tBluebold}[1]{\footnotesize \textsf{\textbf{\textls[-70]{\textcolor{blue}{#1}}}}}
\newcommand{\tBlackbold}[1]{\footnotesize \textsf{\textbf{\textls[-70]{\textcolor{black}{#1}}}}}
\newcommand{\tColortext}[2]{\footnotesize \textsf{\textls[-70]{\textcolor{#2}{#1}}}}
\newcommand{\tColorbold}[2]{\footnotesize \textsf{\textbf{\textls[-70]{\textcolor{#2}{#1}}}}}

%Inline user text
\newcommand{\usertext}{\ifthenelse{\boolean{serif}}{\textrm}{\textsf}}
\newcommand{\usertextsize}{small}
\newcommand{\regtext}[1]{\usertextsize \usertext{\textls[-70]{#1}}}
\newcommand{\redreg}[1]{\usertextsize \usertext{\textls[-70]{\textcolor{red}{#1}}}}
\newcommand{\bluereg}[1]{\usertextsize \usertext{\textls[-70]{\textcolor{blue}{#1}}}}
\newcommand{\blackreg}[1]{\usertextsize \usertext{\textls[-70]{\textcolor{black}{#1}}}}
\newcommand{\boldtext}[1]{\usertextsize \usertext{\textbf{\textls[-70]{#1}}}}
\newcommand{\regbold}[1]{\boldtext}  % alias to match \redbold and \bluebold because I get it wrong
\newcommand{\redbold}[1]{\usertextsize \usertext{\textbf{\textls[-70]{\textcolor{red}{#1}}}}}
\newcommand{\bluebold}[1]{\usertextsize \usertext{\textbf{\textls[-70]{\textcolor{blue}{#1}}}}}
\newcommand{\blackbold}[1]{\usertextsize \usertext{\textbf{\textls[-70]{\textcolor{black}{#1}}}}}
\newcommand{\colortext}[2]{\usertextsize \usertext{\textls[-70]{\textcolor{#2}{#1}}}}
\newcommand{\colorbold}[2]{\usertextsize \usertext{\textbf{\textls[-70]{\textcolor{#2}{#1}}}}}

%Bigger text for names/general approach etc - not used on the boilerplate
\newcommand{\bigboldtext}[1]{\footnotesize \textsf{\textbf{#1}}}

%Colors used for different categories
\colorlet{alert}{red}
\colorlet{announce}{blue}
\colorlet{regular}{black}
\colorlet{alertLabel}{red}
\colorlet{announceLabel}{blue}
\colorlet{regularLabel}{black}
\colorlet{alertNoGuide}{red}
\colorlet{announceNoGuide}{blue}
\colorlet{regularNoGuide}{black}
\colorlet{alertNoGuideLabel}{red}
\colorlet{announceNoGuideLabel}{blue}
\colorlet{regularNoGuideLabel}{black}

%define boolean to use in functions
\newboolean{guide} %Label, NoGuide will turn it off

%define commands to use/redefine in functions
\newcommand\name{}
\newcommand\position{}
\newcommand\direction{}
\newcommand\rosewind{}
\newcommand\category{}
\newcommand\content{}
\newcommand\textlsnum{}
\newcommand\labelIndex{3}
\newcommand\checkboxIndex{2}
\newcommand\rangeIndex{1}
\newcommand\textIndex{0}
\newcommand\letterspace{}
\newcommand\fitstyle{}

%Style definitions
\tikzset{
    block/.style={rectangle, ultra thin},
    alert/.style={ultra thin},
    announce/.style={ultra thin},
    regular/.style={ultra thin},
    alertRect/.style={draw=red},
    announceRect/.style={draw=blue},
    regularRect/.style={draw=black},
    alertFilled/.style={fill=red},
    announceFilled/.style={fill=blue},
    regularFilled/.style={fill=black},
    alertTextField/.style={text=red},
    announceTextField/.style={text=blue},
    regularTextField/.style={text=black},
    checkBox/.style={draw=#1},
    filled/.style={fill=#1},
    textField/.style={text=#1},
    centered/.style={align=center},
    big/.style={font=\relsize{2}},
    bidHeader/.style={font=\bfseries\relsize{2}},
    relsize/.style={font=\relsize{#1}},
    bold/.style={font=\bfseries},
    italics/.style={font=\itshape},
    boldItalics/.style={font=\bfseries\itshape},
    italicsRelsize/.style={font=\itshape\relsize{#1}},
    label/.style={font=\relsize{-1}},
    italicsLabel/.style={font=\itshape\relsize{-1}},
    innerSep1c1d/.style={inner sep=0.5cm},
    t/.style={text depth=.1\baselineskip,
              text height=.5\baselineskip},
    header/.style={right, rectangle, rotate=90, white, inner sep=3pt},
    box/.style={rectangle,draw=black,inner sep=3pt},
    cbox/.style={rectangle,draw=black,fill=black,inner sep=3pt},
    rbox/.style={rectangle,draw=red,inner sep=3pt},
    crbox/.style={rectangle,draw=red,fill=red,inner sep=3pt},
    bbox/.style={rectangle,draw=blue,inner sep=3pt},
    cbbox/.style={rectangle,draw=blue,fill=blue,inner sep=3pt},
}

%Commands to provide filled vs. empty checkboxes
%according to whether a boolean is set or cleared:
\newcommand{\checkbox}[1]{\ifthenelse{\boolean{#1}}{\node [cbox]}{\node [box]}}
\newcommand{\rcheckbox}[1]{\ifthenelse{\boolean{#1}}{\node [crbox]}{\node [rbox]}}
\newcommand{\bcheckbox}[1]{\ifthenelse{\boolean{#1}}{\node [cbbox]}{\node [bbox]}}

%If you want an X or checkmark instead of a filled box, you need to edit the
%style commands at the Style definitions (\tikzset) above (*box ones)

%Draw one row of the opening lead section at once. 6 arguments:
%\showlead{cardstodisplay}{boldcards}{redcards}{circledcards}{startingx}{startingy}
%e.g. \showlead{x,x}{1}{2}{\suitxx}{1}{60} for doubletons vs. suit contracts

\newcommand{\showlead}[6]{\foreach \card [count=\i] in {#1} {%
    \IfSubStr{#4}{\i}{\node at ($(#5 ,#6) + 2.5*(\i,0) $)[rectangle,draw=black,inner sep=1pt]}{\node at ($(#5 ,#6) + 2.5*(\i,0) $) }
    {
        \scriptsize{\textsf{%
            \IfSubStr{#2}{\i}{\bfseries}{}%
            \IfSubStr{#3}{\i}{\textcolor{red}{\card\xfix}}{\card\xfix}%
        }}}; %
}%foreach
}


% Guide lines: triggered by a "visib" boolean set in the file, draw the "write here" lines.  Or not.
% Parameters: Xleft, Xright, Y (all guidelines are horizontal).
\newcommand{\guideline}[3]{\ifthenelse{\boolean{visib}}{\draw [thin, black] (#1, #3) -- (#2, #3);}{}}
\newcommand{\rguideline}[3]{\ifthenelse{\boolean{visib}}{\draw [thin, red] (#1, #3) -- (#2, #3);}{}}
\newcommand{\bguideline}[3]{\ifthenelse{\boolean{visib}}{\draw [thin, blue] (#1, #3) -- (#2, #3);}{}}

%Two formatting commands, since TikZ places text blocks by their centers not
%their baselines: if you use p, y, or g, your text will look ``pushed upward'';
%if you use only lowercase letters, your text will look ``too high''.
% Note: these are obsolete; they just stay here so that cards that did use them don't fail.
\newcommand{\pfix}{\rule{0pt}{2.6mm}} %A way to re-center user text with p,y,g
\newcommand{\xfix}{\rule{0pt}{2.0mm}} %re-center text with no capital letters
\newcommand{\namefix}{\rule{0pt}{3.4mm}} %re-center BigBold text with p,y,g

\newcommand{\IfNoValueOrEmptyTF}[3] {
    \IfNoValueTF{#1}
        {#2}
        {\ifthenelse{\equal{#1}{}}{#2}{#3}}
}

\makeatletter
\newcommand{\gettikzxy}[3]{%
  \tikz@scan@one@point\pgfutil@firstofone#1\relax
  \edef#2{\the\pgf@x}%
  \edef#3{\the\pgf@y}%
}
\makeatother

\NewDocumentCommand{\textField}{mmmmmmO{}}{
    % #1: name
    % #2: position
    % #3: direction
    % #4: category
    % #5: content
    % #6: style
    % #7: (optional) letterspace
    % All *Style parameters are comma-separated lists

    \setboolean{guide}{true}
    \IfSubStringInString{Label}{#4}
        {\setboolean{guide}{false}}
        {}
    \IfSubStringInString{NoGuide}{#4}
        {\setboolean{guide}{false}}
        {}
    \tikzset{#1/.style = {t, #3, textField=#4}}
    \setsepchar{,}
    \readlist*\styles{#6,}
    \foreachitem\style\in\styles{
        \tikzset{#1/.append style/.expanded={\style}}
    }
    \IfSubStringInString{Label}{#4}
        {
            \ifthenelse{\equal{#7}{}}
                {\renewcommand\letterspace{-50}}
                {\renewcommand\letterspace{#7}}
            \node[#1] at (#2) (#1) {\textls[\letterspace]{#5}};
        }
        {
            \ifthenelse{\equal{#7}{}}
                {\renewcommand\letterspace{-30}}
                {\renewcommand\letterspace{#7}}
            \node[#1] at (#2) (#1)
                {
                    \adjustbox{max width=\linewidth}{\usertext #5}
                };
        }
    \ifthenelse{\boolean{visib} \AND \boolean{guide}}
        {
            \path
                (#1.base west) -- (#1.south west)
                            coordinate[pos=0.25] (mid-base-sw)
                (#1.base east) -- (#1.south east)
                            coordinate[pos=0.25] (mid-base-se);
            \gettikzxy{(mid-base-sw)}{\xsw}{\ysw}
            \gettikzxy{(mid-base-se)}{\xse}{\ysw}
            \pgfmathqparse{\xse - \xsw}
            \ifdim \pgfmathresult pt > 50pt
                \draw[#4, thin] (mid-base-sw) -- (mid-base-se);
            \fi
        }
        {}
}

\NewDocumentCommand{\block}{mmmmmmmmo}{
    % #1: name
    % #2: position
    % #3: direction
    % #4: elements (bitset)
    % #5: category
    % #6: labelParameter
    %         labelContent@
    %         labelStyle@
    %         (optional) labelLetterspace
    % #7: rangeParameter
    %         rangeContentLow@
    %         rangeContentHigh@
    %         rangeConnector@
    %         rangeContentStyle@
    %         rangeConnectorStyle@
    %         (optional) rangeLetterspace
    % #8: textParameter
    %         textContent@
    %         textStyle@
    %         (optional) textLetterspace
    % #9: (optional) Style
    % All *Style parameters are comma-separated lists

    \renewcommand\position{#2}
    \bitsetSetBin{elements}{#4}
    \bitsetIsEmpty{elements}{}{
        \bitsetQuery{elements}{\labelIndex}
            {
                \setsepchar{@}
                \readlist*\labelParameter{#6@@}
                \itemtomacro\labelParameter[1]\labelContent
                \itemtomacro\labelParameter[2]\labelStyle
                \itemtomacro\labelParameter[3]\labelLetterspace
            }
            {}
        \bitsetQuery{elements}{\checkboxIndex}
            {
                \tikzset{#1_checkbox/.style = {checkBox=#5, xshift=3}}
                \ifthenelse{\boolean{#1}}
                    {\tikzset{#1_checkbox/.append style = {filled=#5}}}
                    {}
            }
            {}
        \bitsetQuery{elements}{\rangeIndex}
            {
                \setsepchar{@}
                \readlist*\rangeParameter{#7@@@@@}
                \itemtomacro\rangeParameter[1]\rangeContentLow
                \itemtomacro\rangeParameter[2]\rangeContentHigh
                \itemtomacro\rangeParameter[3]\rangeConnector
                \itemtomacro\rangeParameter[4]\rangeContentStyle
                \itemtomacro\rangeParameter[5]\rangeConnectorStyle
                \itemtomacro\rangeParameter[6]\rangeLetterspace
            }
            {}
        \bitsetQuery{elements}{\textIndex}
            {
                \setsepchar{@}
                \readlist*\textParameter{#8@@}
                \itemtomacro\textParameter[1]\textContent
                \itemtomacro\textParameter[2]\textStyle
                \itemtomacro\textParameter[3]\textLetterspace
            }
            {}
    }
    \bitsetIsEmpty{elements}{\node[] at (\position) (#1) {}; }{
        \IfStrEqCase{#3}{
            {right}
                {
                    \renewcommand\rosewind{east}
                    \bitsetQuery{elements}{\labelIndex}
                        {
                            \textField{#1_label}{\position}{#3}{#5Label}
                                    {\labelContent}{ label, \labelStyle}
                                    [\labelLetterspace]
                            \renewcommand\position{#1_label.\rosewind}
                        }
                        { \node[] at (\position) (#1_label) {}; }
                    \bitsetQuery{elements}{\checkboxIndex}
                        {
                            \node[#1_checkbox] at (\position) (#1_checkbox) {};
                            \renewcommand\position{#1_checkbox.\rosewind}
                        }
                        { \node[] at (\position) (#1_checkbox) {}; }
                    \bitsetQuery{elements}{\rangeIndex}
                        {
                            \textField{#1_range_lo}{\position}{#3}{#5}
                                    {\rangeContentLow}{\rangeContentStyle}
                                    [\rangeLetterspace]
                            \renewcommand\position{#1_range_lo.\rosewind}
                            \textField{#1_range_connector}{\position}{#3}{#5NoGuide}
                                    {\rangeConnector}{\rangeConnectorStyle}
                                    [\rangeLetterspace]
                            \renewcommand\position{#1_range_connector.\rosewind}
                            \textField{#1_range_hi}{\position}{#3}{#5}
                                    {\rangeContentHigh}{\rangeContentStyle}
                                    [\rangeLetterspace]
                            \renewcommand\position{#1_range_hi.\rosewind}
                            \node[block, fit=(#1_range_lo)(#1_range_connector)(#1_range_hi)] (#1_range) {};
                        }
                        { \node[] at (\position) (#1_range) {}; }
                    \bitsetQuery{elements}{\textIndex}
                        {
                            \textField{#1_text}{\position}{#3}{#5}
                                    {\textContent}{\textStyle}
                                    [\textLetterspace]
                            \renewcommand\position{#1_text.\rosewind}
                        }
                        { \node[] at (\position) (#1_text) {}; }
                }
            {left}
                {
                    \renewcommand\rosewind{west}
                    \bitsetQuery{elements}{\textIndex}
                        {
                            \textField{#1_text}{\position}{#3}{#5}
                                    {\textContent}{\textStyle}
                                    [\textLetterspace]
                            \renewcommand\position{#1_text.\rosewind}
                        }
                        { \node[] at (\position) (#1_text) {}; }
                    \bitsetQuery{elements}{\rangeIndex}
                        {
                            \textField{#1_range_hi}{\position}{#3}{#5}
                                    {\rangeContentHigh}{\rangeContentStyle}
                                    [\rangeLetterspace]
                            \renewcommand\position{#1_range_hi.\rosewind}
                            \textField{#1_range_connector}{\position}{#3}{#5NoGuide}
                                    {\rangeConnector}{\rangeConnectorStyle}
                                    [\rangeLetterspace]
                            \renewcommand\position{#1_range_connector.\rosewind}
                            \textField{#1_range_lo}{\position}{#3}{#5}
                                    {\rangeContentLow}{\rangeContentStyle}
                                    [\rangeLetterspace]
                            \renewcommand\position{#1_range_lo.\rosewind}
                            \node[block, fit=(#1_range_lo)(#1_range_connector)(#1_range_hi)] (#1_range) {};
                        }
                        { \node[] at (\position) (#1_range) {}; }
                    \bitsetQuery{elements}{\checkboxIndex}
                        {
                            \node[#1_checkbox] at (\position) (#1_checkbox) {};
                            \renewcommand\position{#1_checkbox.\rosewind}
                        }
                        { \node[] at (\position) (#1_checkbox) {}; }
                    \bitsetQuery{elements}{\labelIndex}
                        {
                            \textField{#1_label}{\position}{#3}{#5Label}
                                    {\labelContent}{ label, \labelStyle}
                                    [\labelLetterspace]
                            \renewcommand\position{#1_label.\rosewind}
                        }
                        { \node[] at (\position) (#1_label) {}; }
                }
        }[{Error}]
        \IfNoValueOrEmptyTF{#9}
            {}
            {
                \setsepchar{,}
                \readlist*\styles{#9,}
                \foreachitem\style\in\styles{
                    \tikzset{#1/.append style/.expanded={\style}}
                }
            }
        \node[block, fit=(#1_label)(#1_checkbox)(#1_range)(#1_text) ] (#1) {};
    }
}


%We have to initialize a million booleans (OK, only 212), for the state of every
%checkbox on the convention card:

%Listed below in order from top to bottom, front then back, of the card.
%Generally every item has a 5-letter abbreviated name.
\newboolean{visib}\newboolean{serif}
\newboolean{fo1c}\newboolean{fo2c}\newboolean{footh}
\newboolean{1nts}\newboolean{1ntw}\newboolean{1ntv}
% 1C - 19
\newboolean{club5}\newboolean{club4}\newboolean{club3}\newboolean{cl2nf}
\newboolean{c4432}\newboolean{cl1nf}\newboolean{cl0nf}\newboolean{clcon}
\newboolean{ctxfr}\newboolean{bypas}
\newboolean{clsrn}\newboolean{clsri}\newboolean{clsrf}
\newboolean{cljrw}\newboolean{cljrm}\newboolean{cljri}
\newboolean{clocw}\newboolean{clocm}\newboolean{cloci}
% 1D - 18
\newboolean{diam5}\newboolean{diam4}\newboolean{diam3}\newboolean{dubal}
\newboolean{di2nf}\newboolean{di1nf}\newboolean{di0nf}\newboolean{dicon}
\newboolean{dascl}
\newboolean{disrn}\newboolean{disri}\newboolean{disrf}
\newboolean{dijrw}\newboolean{dijrm}\newboolean{dijri}
\newboolean{diocw}\newboolean{diocm}\newboolean{dioci}
% 1Major - 19
\newboolean{h12l4}\newboolean{h12l5}\newboolean{h34l4}\newboolean{h34l5}
\newboolean{ntfor}\newboolean{ntsem}\newboolean{ntbps}
\newboolean{ra2nt}\newboolean{ra3nt}\newboolean{raspl}
\newboolean{dru2c}\newboolean{dru2d}\newboolean{drcmp}
\newboolean{dblrw}\newboolean{dblrm}\newboolean{dblri}
\newboolean{ocdrw}\newboolean{ocdrm}\newboolean{ocdri}
% 1NT - 24 (19 public, 5 private)
% public
\newboolean{ntasr}\newboolean{nt5cm}\newboolean{staym}\newboolean{puppe}
\newboolean{nat2d}\newboolean{jac2d}\newboolean{nat2h}\newboolean{jac2h}
\newboolean{nat2s}\newboolean{trf2s}\newboolean{nat2n}\newboolean{trf2n}
\newboolean{smole}\newboolean{leben}\newboolean{ntneg}\newboolean{ntpen}
\newboolean{tex4c}\newboolean{tex4d}\newboolean{tex4h}
% private
\newboolean{2coth}\newboolean{2doth}\newboolean{2hoth}\newboolean{2soth}\newboolean{2noth}
% 2NT/3NT - 6
\newboolean{pup2n}\newboolean{jac2n}\newboolean{tex2n}
\newboolean{con2n}\newboolean{neg2n}\newboolean{gam3n}
%Two-bids - 23
\newboolean{vs2cl}\newboolean{st2cl}\newboolean{na2cl}\newboolean{ot2cl}
\newboolean{neg2d}\newboolean{wai2d}\newboolean{steps}\newboolean{neg2h}
\newboolean{wk2di}\newboolean{in2di}\newboolean{st2di}\newboolean{co2di}\newboolean{dnsnf}
\newboolean{wk2he}\newboolean{in2he}\newboolean{st2he}\newboolean{2s2he}\newboolean{hnsnf}
\newboolean{wk2sp}\newboolean{in2sp}\newboolean{st2sp}\newboolean{2s2sp}\newboolean{snsnf}
%Bottom of card - 5
\newboolean{nmf1w}\newboolean{nmf2w}\newboolean{xyz2w}\newboolean{fsfrd}\newboolean{fsfgf}
%Doubles - 6
\newboolean{negax}\newboolean{penax}\newboolean{respx}\newboolean{maxix}
\newboolean{suppx}\newboolean{supxx}
% NT Overcalls - 4
\newboolean{syson}\newboolean{sysba}\newboolean{dntco}\newboolean{unu2l}
% Overcalls - 13
\newboolean{oc4cd}
\newboolean{jostr}\newboolean{joint}\newboolean{jowea}\newboolean{jocon}
\newboolean{nsfor}\newboolean{nsnfc}\newboolean{nsnon}\newboolean{onstf}
\newboolean{jrwea}\newboolean{jrmix}\newboolean{jrinv}\newboolean{occus}
% Cuebids - 12
\newboolean{qamim}\newboolean{qamin}\newboolean{qamio}
\newboolean{qqmim}\newboolean{qqmin}\newboolean{qqmio}
\newboolean{qnmim}\newboolean{qnmin}\newboolean{qnmio}
\newboolean{qnmam}\newboolean{qnman}\newboolean{qnmao}
% vs T/O X - 12
\newboolean{nsf2l}\newboolean{xnstf}
\newboolean{jsfor}\newboolean{jsinv}\newboolean{jswea}\newboolean{jsfit}
\newboolean{xximp}\newboolean{xxcon}
\newboolean{minnt}\newboolean{minrs}\newboolean{majnt}\newboolean{majrs}
% Preempts & vs Preempts - 4
\newboolean{namya}\newboolean{opdto}\newboolean{oppen}\newboolean{opleb}
% Slam conventions - 7
\newboolean{gerbe}\newboolean{gednt}\newboolean{geseq}\newboolean{genon}
\newboolean{black}\newboolean{b0314}\newboolean{b1430}
% Signalling - 22
\newboolean{stcsu}\newboolean{stcnt}\newboolean{stasu}\newboolean{stant}
\newboolean{udcsu}\newboolean{udcnt}\newboolean{udasu}\newboolean{udant}
\newboolean{smisu}\newboolean{smint}\newboolean{smirv}
\newboolean{deatt}\newboolean{decou}\newboolean{desui}
\newboolean{pratt}\newboolean{prcou}\newboolean{prsui}
\newboolean{std1d}\newboolean{udn1d}\newboolean{lav1d}\newboolean{odd1d}\newboolean{oth1d}
% Leads - 12
\newboolean{su4th}\newboolean{su3rd}\newboolean{su3lo}\newboolean{suatt}\newboolean{susxx}
\newboolean{suakv}
\newboolean{nt4th}\newboolean{nt3rd}\newboolean{nt3lo}\newboolean{ntatt}\newboolean{nt2xx}
\newboolean{ntakv}

% And, finally, we define the convention card itself,
% inside one huuuuuge command called \drawconventioncard:

% All coordinates of items inside here are given in millimeters
% from the bottom left corner of the card.
% The "t" style is "text" user text or preformatted text.  Using this style
% auto-sets the text to handle the descender problem previously solved by
% pfix.  Unfortunately this can not be done for "every node" because it
% expands the checkboxes.
\newcommand{\drawconventioncard}{%
    \pagestyle{empty}
    \let\svmaketitle\maketitle
    \def\maketitle{\svmaketitle\thispagestyle{empty}}
    \usetikzlibrary{scopes}%
    \usetikzlibrary{calc}%needed to position stuff in strings
    \usetikzlibrary{fit}%
    \begin{tikzpicture}[xscale=0.2,yscale=0.125,
    ]
    % draw a box around everything
    \draw (101, 0) -- (101, 215) -- (203, 215) -- (203, 0) -- cycle;
    %\draw [help lines] (101, 0) grid [step = 5] (203, 215);
    % dividers on convention card:
        {
        % Front Side
        \draw (101, 209) -- (101, 215);
        \draw (104, 209) -- +(99, 0);
        \draw [fill=black] (101, 187) rectangle (104, 209);
        \node [header] at (102.5, 191) {\tBoldtext{OVERVIEW}};
        \draw (104, 187) -- +(99, 0);
        \draw [fill=gray] (101, 141) rectangle (104, 187);
        \node [header] at (102.5, 157) {\tBoldtext{MINORS}};
        \draw (104, 164) -- +(99, 0); % 1C
        \draw (104, 141) -- +(99, 0); % 1D
        \draw [fill=black] (101, 114) rectangle (104, 141);
        \node [header] at (102.5, 120) {\tBoldtext{MAJORS}};
        \draw (104, 114) -- +(99, 0);
        \draw [fill=gray] (101, 60) rectangle (104, 114);
        \node [header] at (102.5, 78) {\tBoldtext{NOTRUMP}};
        \draw (104, 76) -- +(99, 0); % 1NT
        \draw (104, 66) -- +(99, 0); % 2NT
        \draw (104, 60) -- +(99, 0); % 3NT
        \draw [fill=black] (101, 18) rectangle (104, 60);
        \node [header] at (102.5, 35) {\tBoldtext{2 LEVEL}};
        \draw (104, 48) -- +(99, 0); % 2C
        \draw (104, 38) -- +(99, 0); % 2D
        \draw (104, 28) -- +(99, 0); % 2H
        \draw (104, 18) -- +(99, 0); % 2S
        \draw [fill=gray] (101, 0) rectangle (104, 18);
        \node [header] at (102.5, 3) {\tBoldtext{OTHER}};
    }

% Names:
    \block{names}{101,212}{right}{1001}{regularNoGuide}
         {Names:@big,bold}
         {}
         {\names @big,bold}
    \block{playernumber}{203, 212}{left}{0001}{regularNoGuide}
         {}{}
         {\playernumber @big,bold}

% Overview:
% set private booleans based on strings being defined or not.
    \IfNoValueOrEmptyTF{\foothertext}
        {\setboolean{footh}{false}}
        {\setboolean{footh}{true}}

    \block{genapproachlabel}{104, 205.5}{right}{1000}{regular}
        {General Approach@bold}
        {}{}
    \block{genapproach}{203, 205.5}{left}{0001}{regular}
        {}{}
        {\generalapproach @text width=440, centered, bold}
    \block{mhb}{104, 201}{right}{1000}{regular}
        {Min Expected HCP when Balanced:@italicsLabel}
        {}{}
    \block{mhbo}{mhb.east}{right}{1001}{regular}
        {Opening}
        {}
        {\minHCPopen @text width=190}
    \block{mhbr}{203, 201}{left}{1001}{regular}
        {Responding}
        {}
        {\minHCPresp @text width=70, centered}

    \block{fohdr}{104,197}{right}{1000}{regular}
        {Forcing Opening:}
        {}{}
    \block{fo1c}{fohdr.east}{right}{1100}{alert}
        {1\bc}
        {}{}
    \block{fo2c}{fo1c.east}{right}{1100}{regular}
        {2\bc}
        {}{}
    \block{footh}{fo2c.east}{right}{1101}{alert}
        {Other}
        {}
        {\foothertext @text width=150}
    \block{1ntv}{201, 197}{left}{1100}{regular}
        {Variable}
        {}{}
    \block{1ntw}{1ntv.west}{left}{1100}{regular}
        {Weak}
        {}{}
    \block{1nts}{1ntw.west}{left}{1100}{regular}
        {Strong}
        {}{}
    \block{1nthead}{1nts.west}{left}{1000}{regular}
        {1NT Opening:}
        {}{}

    \block{btmrp}{104,193}{right}{1000}{regular}
        {Bids That May\\Require Preparation: @text width=110}
        {}{}
    \block{btmrp1}{203, 193}{left}{0001}{regular}
        {}{}
        {\bidspreptop @text width=465, bold}
    \block{btmrp2}{203, 189}{left}{0001}{regularNoGuide}
        {}{}
        {\bidsprepbottom @text width=465, bold}

% 1C opening

    \block{1chdr}{104,183.5}{right}{1000}{regular}
        {1\bc@bidHeader}{}{}
    \block{1cmin}{111,184.8}{right}{1000}{regular}
        {Min Length:}{}{}
    \block{club5}{1cmin.east}{right}{1100}{regular}
        {5}{}{}
    \block{club4}{club5.east}{right}{1100}{regular}
        {4}{}{}
    \block{club3}{club4.east}{right}{1100}{regular}
        {3}{}{}
    \block{cl2nf}{club3.east}{right}{1100}{announce}
        {2}{}{}
    \block{c4432}{cl2nf.east}{right}{1100}{announce}
        {4432 only}{}{}
    \node [t, right, announceTextField] at (c4432.west) {(};
    \node [t, right, announceTextField, xshift=-4.2mm] at (c4432.east) {)};
    \block{cl1nf}{c4432.east}{right}{1100}{announce}
        {NF 1}{}{}
    \block{cl0nf}{cl1nf.east}{right}{1100}{announce}
        {NF 0}{}{}
    \block{clcon}{cl0nf.east}{right}{1100}{alert}
        {Art F}{}{}

    \block{cldesc}{203, 181}{left}{0001}{regular}
        {}{}
        {\cldescribe @text width=465}
    \block{clubresp}{114.5, 177}{right}{1001}{regular}
        {Resp:}{}
        {\clresponses @text width=330}
    \block{ctxfr}{clubresp.east}{right}{1100}{announce}
        {Transfer Responses}{}{}
    \block{c1respdi}{104, 173}{right}{1001}{regular}
        {1\,\rd\,}{}
        {\clrespdi @text width=144}
        [ innerSep1c1d ]
    \block{bypas}{c1respdi.east}{right}{1100}{regular}
        {Bypass 5+\rd\,}{}{}
    \block{cl1nt}{104,169.5}{right}{1010}{regular}
        {1NT}{\minonenlowtext@\minonenhightext@to}{}
    \block{cl2nt}{104,166}{right}{1010}{regular}
        {2NT}{\mintwonlowtext@\mintwonhightext@to}{}

    \block{clraises}{160,174}{right}{1000}{regular}
        {Raises}{}{}
    \block{clraisesingle}{149,171}{right}{1000}{regular}
        {Single:}{}{}
    \block{clsrn}{178,171}{left}{1100}{regular}
        {NF}{}{}
    \block{clsri}{189,171}{left}{1100}{alert}
        {Inv+}{}{}
    \block{clsrf}{198,171}{left}{1100}{alert}
        {GF}{}{}
    \block{clraisejump}{149,168.5}{right}{1000}{regular}
        {Jump:}{}{}
    \block{cljrw}{178,168.5}{left}{1100}{alert}
        {Weak}{}{}
    \block{cljrm}{189,168.5}{left}{1100}{alert}
        {Mixed}{}{}
    \block{cljri}{198,168.5}{left}{1100}{regular}
        {Inv}{}{}
    \block{clraiseafterovercall}{153,166}{right}{1000}{regular}
        {After Overcall:}{}{}
    \block{clocw}{178,166}{left}{1100}{regular}
        {Weak}{}{}
    \block{clocm}{189,166}{left}{1100}{regular}
        {Mixed}{}{}
    \block{cloci}{198,166}{left}{1100}{regular}
        {Inv}{}{}

% 1D opening

    \block{1dhdr}{104,160.5}{right}{1000}{regular}
        {1\rd@bidHeader}{}{}
    \block{1dmin}{111,161.8}{right}{1000}{regular}
        {Min Length:}{}{}
    \block{diam5}{1dmin.east}{right}{1100}{regular}
        {5}{}{}
    \block{diam4}{diam5.east}{right}{1100}{regular}
        {4}{}{}
    \block{diam3}{diam4.east}{right}{1100}{regular}
        {3}{}{}
    \block{dubal}{diam3.east}{right}{1100}{regular}
        {Unbal}{}{}
    \block{di2nf}{dubal.east}{right}{1100}{announce}
        {NF 2}{}{}
    \block{di1nf}{di2nf.east}{right}{1100}{announce}
        {NF 1}{}{}
    \block{di0nf}{di1nf.east}{right}{1100}{announce}
        {NF 0}{}{}
    \block{dicon}{di0nf.east}{right}{1100}{alert}
        {Art F}{}{}

    \block{didesc}{203, 158.5}{left}{0001}{regular}
        {}{}
        {\didescribe @text width=465}
    \block{diamresp}{114.5, 155}{right}{1001}{regular}
        {Resp:}{}
        {\diresponses @text width=330}
    \block{dascl}{diamresp.east}{right}{1100}{regular}
        {Same as over 1\c\,}{}{}

    \block{di1nt}{104,146.5}{right}{1010}{regular}
        {1NT}{\minonedionenlowtext@\minonedionenhightext@to}{}
    \block{di2nt}{104,143}{right}{1010}{regular}
        {2NT}{\minoneditwonlowtext@\minoneditwonhightext@to}{}

    \block{diraises}{160,151}{right}{1000}{regular}
        {Raises}{}{}
    \block{diraisesingle}{149,148}{right}{1000}{regular}
        {Single:}{}{}
    \block{disrn}{178,148}{left}{1100}{regular}
        {NF}{}{}
    \block{disri}{189,148}{left}{1100}{alert}
        {Inv+}{}{}
    \block{disrf}{198,148}{left}{1100}{alert}
        {GF}{}{}
    \block{diraisejump}{149,145.5}{right}{1000}{regular}
        {Jump:}{}{}
    \block{dijrw}{178,145.5}{left}{1100}{alert}
        {Weak}{}{}
    \block{dijrm}{189,145.5}{left}{1100}{alert}
        {Mixed}{}{}
    \block{dijri}{198,145.5}{left}{1100}{regular}
        {Inv}{}{}
    \block{diraiseafterovercall}{153,143}{right}{1000}{regular}
        {After Overcall:}{}{}
    \block{diocw}{178,143}{left}{1100}{regular}
        {Weak}{}{}
    \block{diocm}{189,143}{left}{1100}{regular}
        {Mixed}{}{}
    \block{dioci}{198,143}{left}{1100}{regular}
        {Inv}{}{}

% Major Openings
    \block{1dhdr}{104,137.5}{right}{1000}{regular}
        {1\rh/\bs@bidHeader}{}{}
    \block{1maj12len}{107,133}{right}{1000}{regular}
        {1\textsuperscript{st}/2\textsuperscript{nd} Length:}{}{}
    \block{h12l4}{1maj12len.east}{right}{1100}{regular}
        {4}{}{}
    \block{h12l5}{h12l4.east}{right}{1100}{regular}
        {5}{}{}
    \block{1maj34len}{107,130}{right}{1000}{regular}
        {3\textsuperscript{rd}/4\textsuperscript{th} Length:}{}{}
    \block{h34l4}{1maj34len.east}{right}{1100}{regular}
        {4}{}{}
    \block{h34l5}{h34l4.east}{right}{1100}{regular}
        {5}{}{}

    \block{1m1ntf}{107,127}{right}{1000}{announce}
        {1\,NT:}{}{}
    \block{ntfor}{1m1ntf.east}{right}{1100}{regular}
        {F}{}{}
    \block{ntsem}{ntfor.east}{right}{1100}{regular}
        {Semi-F}{}{}
    \block{ntbps}{ntsem.east}{right}{1100}{regular}
        {Bypass\,\bs}{}{}

    \block{majothertop}{104,121}{right}{1001}{alert}
        {Other:}{}{\majothertexttop}
    \block{majotherbottom}{104,117}{right}{1001}{alert}
        {}{}{\majothertextbottom}

    \block{1majraises}{149,138.3}{right}{1000}{alert}
        {Art Raises:}{}{}
    \block{ra2nt}{1majraises.east}{right}{1100}{alert}
        {2NT}{}{}
    \block{ra3nt}{ra2nt.east}{right}{1100}{alert}
        {3NT}{}{}
    \block{raspl}{ra3nt.east}{right}{1100}{alert}
        {Splinter}{}{}
    \block{majraiseother}{149,134}{right}{1001}{alert}
        {Other:}{}{\majraisetext}

    \block{drury}{149,130}{right}{1000}{alert}
        {Drury:}{}{}
    \block{dru2c}{drury.east}{right}{1100}{alert}
        {2\,\bc}{}{}
    \block{dru2d}{dru2c.east}{right}{1100}{alert}
        {2\,\rd}{}{}
    \block{drcmp}{dru2d.east}{right}{1100}{alert}
        {In Comp}{}{}
    \block{droth}{drcmp.east}{right}{0001}{alert}
        {}{}{\majdrurytext}

    \block{majraisejump}{149,125.5}{right}{1000}{regular}
        {Jump Raise:}{}{}
    \block{dblrw}{178,125.5}{left}{1100}{alert}
        {Weak}{}{}
    \block{dblrm}{189,125.5}{left}{1100}{alert}
        {Mixed}{}{}
    \block{dblri}{198,125.5}{left}{1100}{alert}
        {Inv}{}{}
    \block{majraiseafterovercall}{153,122}{right}{1000}{regular}
        {After Overcall:}{}{}
    \block{ocdrw}{178,122}{left}{1100}{regular}
        {Weak}{}{}
    \block{ocdrm}{189,122}{left}{1100}{regular}
        {Mixed}{}{}
    \block{ocdri}{198,122}{left}{1100}{regular}
        {Inv}{}{}

%1 NT opening:
 % set private booleans based on strings being empty or not.
    \setboolean{2coth}{false}
    \ifthenelse{\equal{\ntditext}{}}
        {\setboolean{2doth}{false}}
        {\setboolean{2doth}{true}}
    \ifthenelse{\equal{\nthetext}{}}
        {\setboolean{2hoth}{false}}
        {\setboolean{2hoth}{true}}
    \ifthenelse{\equal{\ntsptext}{}}
        {\setboolean{2soth}{false}}
        {\setboolean{2soth}{true}}
    \ifthenelse{\equal{\ntnttext}{}}
        {\setboolean{2noth}{false}}
        {\setboolean{2noth}{true}}

    \block{1ntrange1}{104,110.5}{right}{1010}{announce}
        {1NT@bidHeader}{\ntlowtext@\nthightext@to}{}

    % We can use the area past the first range for explanation...
    \ifthenelse{\NOT \boolean{1ntv} \AND \equal{\altntlowtext}{} \AND \equal{\altnthightext}{}}
        {
            \block{1ntstyle}{130,110.5}{right}{1001}{announce}
                {Style:}{}{\altntresponse}
    }{ % unless there is a second range.
            \block{1ntrange1conds}{1ntrange1.east}{right}{0001}{announce}
                {}{}{If:\,\ntseatvul}
            \block{1nhd2}{152.5,110.5}{right}{1010}{announce}
                {1NT@bidHeader}{\altntlowtext@\altnthightext@to}{}
            \block{ntasr}{1nhd2.east}{right}{1101}{regular}
                {Same resp?}{}{\altntresponse}
    }

% 1NT box, left column
    \block{nt5cm}{104,107}{right}{1100}{regular}
        {5-Card Major}{}{}
    \block{syson}{nt5cm.east}{right}{1001}{regular}
        {Sys on vs:}{}{\sysontext}

    \block{1nt2c}{104,103}{right}{1000}{regular}
        {2\bc:}{}{}
    \block{staym}{1nt2c.east}{right}{1100}{regular}
        {Stayman}{}{}
    \block{puppe}{staym.east}{right}{1100}{regular}
        {Puppet}{}{}
    \block{2coth}{puppe.east}{right}{1100}{alert}
        {Other}{}{}

    \block{1nt2d}{104,99}{right}{1000}{regular}
        {2\rd:}{}{}
    \block{2doth}{123,99}{left}{1100}{alert}
        {Other}{}{}
    \block{jac2d}{2doth.west}{left}{1100}{announce}
        {Tfr}{}{}
    \block{nat2d}{jac2d.west}{left}{1100}{regular}
        {Nat}{}{}
    \block{2dothtext}{2doth.east}{right}{0001}{alert}
        {}{}{\ntditext}

    \block{1nt2h}{104,95}{right}{1000}{regular}
        {2\rh:}{}{}
    \block{2hoth}{123,95}{left}{1100}{alert}
        {Other}{}{}
    \block{jac2h}{2hoth.west}{left}{1100}{announce}
        {Tfr}{}{}
    \block{nat2h}{jac2h.west}{left}{1100}{regular}
        {Nat}{}{}
    \block{2hothtext}{2hoth.east}{right}{0001}{alert}
        {}{}{\nthetext}

    \block{1nt2s}{104,91}{right}{1000}{regular}
        {2\bs:}{}{}
    \block{2soth}{123,91}{left}{1100}{alert}
        {Other}{}{}
    \block{trf2s}{2soth.west}{left}{1100}{announce}
        {Tfr}{}{}
    \block{nat2s}{trf2s.west}{left}{1100}{regular}
        {Nat}{}{}
    \block{2sothtext}{2soth.east}{right}{0001}{alert}
        {}{}{\ntsptext@text width=140}

    \block{1nt2n}{104,87}{right}{1000}{regular}
        {2NT:}{}{}
    \block{2noth}{123,87}{left}{1100}{alert}
        {Other}{}{}
    \block{jac2n}{2noth.west}{left}{1100}{announce}
        {Tfr}{}{}
    \block{nat2n}{jac2n.west}{left}{1100}{regular}
        {Nat}{}{}
    \block{2nothtext}{2noth.east}{right}{0001}{alert}
        {}{}{\ntnttext@text width=140}

    \block{smole}{104,83}{right}{1100}{alert}
        {Smolen}{}{}
    \block{trf}{smole.east}{right}{1000}{announce}
        {Trf:}{}{}
    \block{tex4c}{trf.east}{right}{1100}{announce}
        {4\,\bc@regularTextField}{}{}
    \block{tex4d}{tex4c.east}{right}{1100}{announce}
        {4\,\rd@regularTextField}{}{}
    \block{tex4h}{tex4d.east}{right}{1100}{announce}
        {4\,\rh@regularTextField}{}{}

    \block{ntdbl}{104,79}{right}{1000}{regular}
        {Dbl:}{}{}
    \block{ntneg}{ntdbl.east}{right}{1101}{regular}
        {Neg}{}{\ntnegtext}
    \block{ntpen}{ntneg.east}{right}{1100}{regular}
        {Pen}{}{}
    \block{ntotherx}{ntpen.east}{right}{1001}{alert}
        {Other:}{}{\ntxothertext}
    \block{ntneg}{170,79}{right}{1101}{alert}
        {Lebensohl}{}{\ntlebentext}

%1NT box, right column

    \block{1nt3c}{152.5,106}{right}{1001}{alert}
        {3\,\bc@regularTextField}{}{\ntcjumptext}
    \block{1nt3d}{152.5,102}{right}{1001}{alert}
        {3\,\rd@regularTextField}{}{\ntdjumptext}
    \block{1nt3h}{152.5,98}{right}{1001}{alert}
        {3\,\rh@regularTextField}{}{\nthjumptext}
    \block{1nt3s}{152.5,94}{right}{1001}{alert}
        {3\,\bs@regularTextField}{}{\ntsjumptext}
    \block{1ntother}{152.5,90}{right}{1000}{alert}
        {Other:}{}{}
    \block{1ntothertop}{1ntother.east}{right}{0001}{alert}
        {}{}{\ntothertexttop}
    \block{1ntotherbottom}{152.5,86}{right}{0001}{alert}
        {}{}{\ntothertextbottom}

%2NT/3NT Openings
    \node [t, right] at (104, 72.5) {\bigtext{2NT}};
    \node [t, right] at (121, 73.3) {\tRegtext{to}};
    \node [t] at (118, 73.3) {\boldtext{\twonlowtext}};
    \guideline{115.5}{121}{71.8}
    \node [t] at (128, 73.3) {\boldtext{\twonhightext}};
    \guideline{125}{131}{71.8}
    \node [t, right] at (130, 73.3) (pup2n) {\tRegtext{Puppet\,}};
    \checkbox{pup2n} at (pup2n.east) (pup2nbox) {};
    \node [t, right] at (pup2nbox.east) (2n3s) {\tRedreg{3\,\bs:\ }\redreg{\twonsptext}};
    \rguideline{148}{202}{71.8}
    \node [t, right] at (104, 68.5) (con2n) {\tRedreg{Conv\,}};
    \rcheckbox{con2n} at (con2n.east) (con2nbox) {};
    \node [t, right] at (con2nbox.east) {\redreg{\convnttext}};
    \rguideline{115}{130}{67}
    \node [t, right] at (130, 68.3) (jac2n) {\tBluereg{Tfr: 3 Lvl\,}};
    \bcheckbox{jac2n} at (jac2n.east) (jac2nbox) {};
    \node [t, right] at (jac2nbox.east) (tex2n) {\tBluereg{4 Lvl\,}};
    \bcheckbox{tex2n} at (tex2n.east) (tex2nbox) {};
    \node [t, right] at (tex2nbox.east) (neg2n) {\tRegtext{Neg Dbl\,}};
    \checkbox{neg2n} at (neg2n.east) (neg2nbox) {};
    \node [t, right] at (neg2nbox.east) {\tRedreg{Other: }\redreg{\twonothertext}};
    \rguideline{176}{202}{67}

    \node [t, right] at (104, 62) {\bigtext{3NT}};
    \node [t, right] at (121, 62.8) {\tRegtext{to}};
    \node [t] at (118, 62.8) {\boldtext{\threenlowtext}};
    \guideline{115.5}{121}{61.3}
    \node [t] at (128, 62.8) {\boldtext{\threenhightext}};
    \guideline{125}{131}{61.3}
    \rcheckbox{gam3n} at (144.5, 62.8) (gam3nbox) {};
    \node [t, left] at (gam3nbox.west) {\tRedreg{One Suit:}};
    \node [t, right] at (gam3nbox.east) {\redreg{\threenonesuittext}};
    \rguideline{146.5}{202}{61.3}

%2C Opening
    \node [t, right] at (104, 56) {\bigtext{2\c}};
    \node [t] at (115, 57.5) {\boldtext{\twoclowtext}};
    \guideline{112.5}{118}{56}
    \node [t, right] at (118, 57.5) {\tRegtext{to}};
    \node [t] at (125, 57.5) {\boldtext{\twochightext}};
    \guideline{122.5}{128}{56}
    \node [t, right] at (129, 57.5) {\regtext{\twocldescribe}};
    \guideline{130}{167}{56}
    \node [t, right] at (104, 50) (artvs2c) {\tRegtext{Very Str\,}};
    \checkbox{vs2cl} at (artvs2c.east) (vs2clbox) {};
    \node [t, right, xshift=-0.5mm] at (vs2clbox.east) (artst2c) {\tRedreg{Str\,}};
    \rcheckbox{st2cl} at (artst2c.east) (st2clbox) {};
    \node [t, right, xshift=-0.5mm] at (st2clbox.east) (nat2c) {\tRedreg{Nat\,}};
    \rcheckbox{na2cl} at (nat2c.east) (na2clbox) {};
    \node [t, right, xshift=-0.5mm] at (na2clbox.east) (conv2c) {\tRedreg{Conv\,}};
    \rcheckbox{ot2cl} at (conv2c.east) (ot2clbox) {};
    \node [t, right] at (ot2clbox.east) {\redreg{\twoclconvtext}};
    \rguideline{142.5}{160}{48.5}

    \node [t, right] at (168, 57.5) (neg2d) {\tRegtext{2\,\rd\ Resp: Neg\,}};
    \checkbox{neg2d} at (neg2d.east) (neg2dbox) {};
    \node [t, right] at (neg2dbox.east) (wai2d) {\tRegtext{Waiting\,}};
    \checkbox{wai2d} at (wai2d.east) {};
    \rcheckbox{steps} at (168, 54) (2cstepsbox) {};
    \node [t, left] at (2cstepsbox.west) {\tRedreg{Steps}};
    \node [t, right] at (2cstepsbox.east) {\redreg{\twoclstepstext}};
    \rguideline{170}{188}{52.5}
    \node [t, right] at (187.5, 54) (neg2h) {\tRedreg{2\,\rh\ Neg\,}};
    \rcheckbox{neg2h} at (neg2h.east) {};
    \node [t, right] at (160, 50) {\tRedreg{Other: }\redreg{\twoclresponse}};
    \rguideline{169}{202}{48.5}

%2D Opening
    \node [t, right] at (104, 44.5) {\bigtext{2\rd}};
    \node [t] at (115, 45.5) {\boldtext{\twodlowtext}};
    \guideline{112.5}{118}{44}
    \node [t, right] at (118, 45.5) {\tRegtext{to}};
    \node [t] at (125, 45.5) {\boldtext{\twodhightext}};
    \guideline{122.5}{128}{44}
    \node [t, right] at (129, 45.5) {\regtext{\twoddescribe}};
    \guideline{130}{177}{44}
    \node [t, right] at (104, 40.5) (wk2di) {\tRegtext{Wk\,}};
    \checkbox{wk2di} (wk2dibox) at (wk2di.east) {};
    \node [t, right] at (wk2dibox.east) (in2di) {\tRedreg{Int\,}};
    \rcheckbox{in2di} (in2dibox) at (in2di.east) {};
    \node [t, right, xshift=-0.5mm] at (in2dibox.east) (st2di) {\tRedreg{Str\,}};
    \rcheckbox{st2di} (st2dibox) at (st2di.east) {};
    \node [t, right] at (st2dibox.east) (co2di) {\tRedreg{Conv\,}};
    \rcheckbox{co2di} at (co2di.east) {};
    \node [t, right] at (137, 40.5) {\tRegtext{Rebids over 2NT: }\regtext{\twodntresp}};
    \guideline{158}{177}{39}
    \node [t, right] at (177, 45.5) (dnsnf) {\tRedreg{New Suit NF\,}};
    \rcheckbox{dnsnf} at (dnsnf.east) {};
    \node [t, right] at (177, 40.5) {\tRedreg{Other: }\redreg{\twodresponse}};
    \rguideline{186}{202}{39}

%2H Opening
    \node [t, right] at (104, 34.5) {\bigtext{2\rh}};
    \node [t] at (115, 35.5) {\boldtext{\twohlowtext}};
    \guideline{112.5}{118}{34}
    \node [t, right] at (118, 35.5) {\tRegtext{to}};
    \node [t] at (125, 35.5) {\boldtext{\twohhightext}};
    \guideline{122.5}{128}{34}
    \node [t, right] at (129, 35.5) {\regtext{\twohdescribe}};
    \guideline{130}{177}{34}
    \node [t, right] at (104, 30.5) (wk2he) {\tRegtext{Wk\,}};
    \checkbox{wk2he} (wk2hebox) at (wk2he.east) {};
    \node [t, right, xshift=-0.5mm] at (wk2hebox.east) (in2he) {\tRedreg{Int\,}};
    \rcheckbox{in2he} (in2hebox) at (in2he.east) {};
    \node [t, right, xshift=-0.5mm] at (in2hebox.east) (st2he) {\tRedreg{Str\,}};
    \rcheckbox{st2he} (st2hebox) at (st2he.east) {};
    \node [t, right, xshift=-0.5mm] at (st2hebox.east) (2s2he) {\tRedreg{2-Suits\,}};
    \rcheckbox{2s2he} at (2s2he.east) {};
    \node [t, right] at (137, 30.5) {\tRegtext{Rebids over 2NT: }\regtext{\twohntresp}};
    \guideline{158}{177}{29}
    \node [t, right] at (177, 35.5) (hnsnf) {\tRedreg{New Suit NF\,}};
    \rcheckbox{hnsnf} at (hnsnf.east) {};
    \node [t, right] at (177, 30.5) {\tRedreg{Other: }\redreg{\twohresponse}};
    \rguideline{186}{202}{29}

%2S Opening
    \node [t, right] at (104, 24.5) {\bigtext{2\s}};
    \node [t] at (115, 25.5) {\boldtext{\twoslowtext}};
    \guideline{112.5}{118}{24}
    \node [t, right] at (118, 25.5) {\tRegtext{to}};
    \node [t] at (125, 25.5) {\boldtext{\twoshightext}};
    \guideline{122.5}{128}{24}
    \node [t, right] at (129, 25.5) {\regtext{\twosdescribe}};
    \guideline{130}{175}{24}
    \node [t, right] at (104, 20.5) (wk2sp) {\tRegtext{Wk\,}};
    \checkbox{wk2sp} (wk2spbox) at (wk2sp.east) {};
    \node [t, right, xshift=-0.5mm] at (wk2spbox.east) (in2sp) {\tRedreg{Int\,}};
    \rcheckbox{in2sp} (in2spbox) at (in2sp.east) {};
    \node [t, right, xshift=-0.5mm] at (in2spbox.east) (st2sp) {\tRedreg{Str\,}};
    \rcheckbox{st2sp} (st2spbox) at (st2sp.east) {};
    \node [t, right, xshift=-0.5mm] at (st2spbox.east) (2s2sp) {\tRedreg{2-Suits\,}};
    \rcheckbox{2s2sp} at (2s2sp.east) {};
    \node [t, right] at (137, 20.5) {\tRegtext{Rebids over 2NT: }\regtext{\twosntresp}};
    \guideline{158}{178}{19}
    \node [t, right] at (177, 25.5) (snsnf) {\tRedreg{New Suit NF\,}};
    \rcheckbox{snsnf} at (snsnf.east) {};
    \node [t, right] at (177, 20.5) {\tRedreg{Other: }\redreg{\twosresponse}};
    \rguideline{186}{202}{19}

%Bottom of card
    \node [t, right] at (104, 15) (jshiftresp) {\tRegtext{Jump Shift Resp:\ }\regtext{\jshifttext}};
    \guideline{125}{202}{13.5}
    \node [t, right] at (104, 11) (vsstrongart) {\tRedreg{Vs (Very)Str Open:\ }\redreg{\vsstrongart}};
    \rguideline{126}{142}{9.5}
    \node [t, left] at (150, 11) (nmf1w) {\tRedreg{NMF\,}};
    \rcheckbox{nmf1w} (nmf1wbox) at (nmf1w.east) {};
    \node [t, right, xshift=-0.5mm] at (nmf1wbox.east) (nmf2w) {\tRedreg{2Way NMF\,}};
    \rcheckbox{nmf2w} (nmf2wbox) at (nmf2w.east) {};
    \node [t, right, xshift=-0.5mm] at (nmf2wbox.east) (xyz2w) {\tRedreg{XYZ\,}};
    \rcheckbox{xyz2w} (xyz2wbox) at (xyz2w.east) {};
    \node [t, right, xshift=-0.5mm] at (xyz2wbox.east) (fsfrd) {\tRedreg{4\textsuperscript{th}SF 1Rnd\,}};
    \rcheckbox{fsfrd} (fsfrdbox) at (fsfrd.east) {};
    \node [t, right, xshift=-0.5mm] at (fsfrdbox.east) (fsfgf) {\tRedreg{GF\,}};
    \rcheckbox{fsfgf} at (fsfgf.east) {};
    \node [t, right] at (104, 7) {\regtext{\footnotestop}};
    \guideline{105}{202}{5.5}
    \node [t, right] at (104, 3) {\regtext{\footnotesbottom}};
    \guideline{105}{202}{1.5}
    \node [right] at (105,-2) {\scriptsize \textsf{\currfilename: \printfdate{ISOext}. Front of Convention Card}};
    \node [right] at (160,-2) {\scriptsize \textsf{Made with \LaTeX\ and acbl2022cc (github.com/mycroftw/conv-cards)}};
    \end{tikzpicture}%
    \newpage;
    \begin{tikzpicture}[xscale=0.2,yscale=0.125,
    ]
    % draw a box around everything
    \draw (0, 0) -- (0, 215) -- (101, 215) -- (101, 0) -- cycle;
    %\draw [help lines] (0, 0) grid [step = 10] (101, 215);
    {
    % Back side
    \draw [fill=black] (0, 193) rectangle (3, 215);
    \node [header] at (1.5, 197) {\tBoldtext{DOUBLES}};
    \draw [fill=black] (50, 193) rectangle (53, 215);
    \node [header] at (51.5, 193) {\tBoldtext{NT OVERCALLS}};
    \draw (3, 193) -- +(98, 0);
    \draw [fill=gray] (0, 157) rectangle (3, 193);
    \node [header] at (1.5, 165) {\tBoldtext{OVERCALLS}};
    \draw [fill=gray] (50, 157) rectangle (53, 193);
    \node [header] at (51.5, 163) {\tBoldtext{vs NT OPENING}};
    \draw (3, 157) -- +(98, 0);
    \draw [fill=black] (0, 129) rectangle (3, 157);
    \node [header] at (1.5, 131) {\tBoldtext{DIRECT CUEBIDS}};
    \draw [fill=black] (50, 129) rectangle (53, 157);
    \node [header] at (51.5, 131) {\tBoldtext{vs TAKEOUT DBL}};
    \draw (3, 129) -- +(98, 0);
    \draw [fill=gray] (0, 103) rectangle (3, 129);
    \node [header] at (1.5, 108) {\tBoldtext{PREEMPTS}};
    \draw (3, 116) -- +(47, 0); % divider between 3 and 4 level PRE
    \draw [fill=gray] (50, 103) rectangle (53, 129);
    \node [header] at (51.5, 106) {\tBoldtext{vs PREEMPTS}};
    \draw (3, 103) -- +(98, 0);
    \draw [fill=black] (0, 82) rectangle (3, 103);
    \node [header] at (1.5, 87) {\tBoldtext{SLAMS}};
    \draw (3, 82) -- +(98, 0);
    \draw [fill=gray] (0, 47) rectangle (3, 82);
    \node [header] at (1.5, 57) {\tBoldtext{CARDING}};
    \draw [fill=gray] (50, 47) rectangle (53, 82);
    \node [header] at (51.5, 57) {\tBoldtext{SIGNALS}};
    \draw (3, 47) -- +(98, 0);
    \draw [fill=black] (0, 0) rectangle (3, 47);
    \node [header] at (1.5, 12) {\tBoldtext{LEADS vs SUITS}};
    \draw [fill=black] (50, 0) rectangle (53, 47);
    \node [header] at (51.5, 15) {\tBoldtext{LEADS vs NT}};
}
%Back of card: Left to right, top to bottom
%Doubles
    \node [t, right] at (3, 212) (negax) {\tRegtext{Negative\,}};
    \checkbox{negax} at (negax.east) (negaxbox) {};
    \node [t, right] at (negaxbox.east) (negaxthru) {\tRegtext{Thru}};
    \node [t] at (30, 212) {\boldtext{\negaxthru}};
    \guideline{24}{35}{210.5}
    \node [t, right] at (36, 212) (penax) {\tRedreg{Penalty\,}};
    \rcheckbox{penax} at (penax.east) {};

    \node [t, right] at (3, 208) (respx) {\tRegtext{Responsive\,}};
    \checkbox{respx} at (respx.east) (respxbox) {};
    \node [t, right] at (respxbox.east) {\tRegtext{Thru}};
    \node [t] at (31, 208) {\boldtext{\respxthru}};
    \guideline{27}{35}{206.5}
    \node [t, right] at (34.5, 208) (maxix) {\tRegtext{Maximal\,}};
    \checkbox{maxix} at (maxix.east) {};

    \node [t, right] at (3, 204) (suppx) {\tRegtext{Support\,}};
    \checkbox{suppx} at (suppx.east) (suppxbox) {};
    \node [t, right] at (suppxbox.east) {\tRegtext{Thru}};
    \node [t] at (29, 204) {\boldtext{\suppxthru}};
    \guideline{23}{35}{202.5}
    \node [t, right] at (35, 204) (supxx) {\tRegtext{Rdbl\,}};
    \checkbox{supxx} at (supxx.east) {};

    \node [t, right] at (3, 200) (toxstyle) {\tRegtext{T/O Style:\ }\regtext{\toxstyletext}};
    \guideline{15.5}{49}{198.5}
    \node [t, right] at (3, 196) {\tRedreg{Other:\ }\redreg{\doubleothertext}};
    \rguideline{12}{49}{194.5}

%NT overcalls
    \node [t, right] at (53, 212) {\tRegtext{Direct 1NT}};
    \node [t] at (69, 212) {\boldtext{\directlowtext}};
    \guideline{66.5}{72.5}{210.5}
    \node [t] at (74, 212) {\tRegtext{to}};
    \node [t] at (79.5, 212) {\boldtext{\directhightext}};
    \guideline{76}{83}{210.5}
    \node [t, right] at (82, 212) (syson) {\tRegtext{Systems on\,}};
    \checkbox{syson} at (syson.east) {};

    \node [t, right] at (53, 208) {\tRegtext{Balance 1NT}};
    \node [t] at (71.5, 208) {\boldtext{\ballowtext}};
    \guideline{69}{74}{206.5}
    \node [t] at (76, 208) {\tRegtext{to}};
    \node [t] at (80, 208) {\boldtext{\balhightext}};
    \guideline{78}{83}{206.5}
    \node [t, right] at (82, 208) (sysba) {\tRegtext{Systems on\,}};
    \checkbox{sysba} at (sysba.east) {};

    \node [t, right] at (53, 204) (dntco) {\tRedreg{Conv\,}};
    \rcheckbox{dntco} at (dntco.east) (dntcobox) {};
    \node [t, right] at (dntcobox.east) {\redreg{\directconvtext}};
    \rguideline{64}{100}{202.5}

    \node [t, right] at (53, 199.5) (unu2l) {\tRegtext{Jump to 2NT:\ \ 2 Lowest Unbid\,}};
    \checkbox{unu2l} at (unu2l.east) {};

    \node [t, right] at (53, 196) (bntco) {\tRedreg{Other:\ }\redreg{\ntothertext}};
    \rguideline{62}{100}{194.5}

% Overcalls
    \node [t, right] at (3, 190) {\tRegtext{1-Lvl}};
    \node [t] at (13, 190) {\boldtext{\oclowtext}};
    \guideline{10.5}{15.5}{188.5}
    \node [t] at (17, 190) {\tRegtext{to}};
    \node [t] at (22, 190) {\boldtext{\ochightext}};
    \guideline{19}{25}{188.5}
    \node [t, right] at (27, 190) (oc4cd) {\tRegtext{Often 4 Cards\,}};
    \checkbox{oc4cd} at (oc4cd.east) {};
    \node [t, right] at (3, 186) {\tRegtext{2-Lvl}};
    \node [t] at (13, 186) {\boldtext{\twooclowtext}};
    \guideline{10.5}{15.5}{184.5}
    \node [t] at (17, 186) {\tRegtext{to}};
    \node [t] at (22, 186) {\boldtext{\twoochightext}};
    \guideline{19}{25}{184.5}
    \node [t, right] at (3, 182) (jowea) {\tRegtext{Jump Overcalls: Wk\,}};
    \checkbox{jowea} at (jowea.east) (joweabox) {};
    \node [t, right] at (joweabox.east) (joint) {\tRedreg{Int\,}};
    \rcheckbox{joint} at (joint.east) (jointbox) {};
    \node [t, right] at (jointbox.east) (jostr) {\tRedreg{Str\,}};
    \rcheckbox{jostr} at (jostr.east) {};
    \node [t, right] at (3, 178) (convjoc) {\tRedreg{Conv\,}};
    \rcheckbox{jocon} at (convjoc.east) (joconbox) {};
    \node [t, right] at (joconbox.east) {\redreg{\jumpovercalltext}};
    \rguideline{14}{49}{176.5}

    \node [t, right] at (3, 174.5) {\tRegtext{Responses}};
    \node [t, right] at (3, 171) (nsf) {\tRegtext{New suit: F\,}};
    \checkbox{nsfor} at (nsf.east) (nsfbox){};
    \node [t, right, xshift=-0.5mm] at (nsfbox.east) (nsnfc) {\tRegtext{NFConst\,}};
    \checkbox{nsnfc} at (nsnfc.east) (nsnfcbox) {};
    \node [t, right] at (nsnfcbox.east) (nsnon) {\tRegtext{NF\,}};
    \checkbox{nsnon} at (nsnon.east) (nsnonbox) {};
    \node [t, right] at (nsnonbox.east) (nstrf) {\tBluereg{Trf\,}};
    \bcheckbox{onstf} at (nstrf.east) {};
    \node [t, right] at (3, 167) (jrwea) {\tRegtext{Jump raise: Wk\,}};
    \checkbox{jrwea} at (jrwea.east) (jrweabox) {};
    \node [t, right] at (jrweabox.east) (jrmix) {\tRegtext{Mixed\,}};
    \checkbox{jrmix} at (jrmix.east) (jrmixbox) {};
    \node [t, right] at (jrmixbox.east) (jrinv) {\tRegtext{Inv\,}};
    \checkbox{jrinv} at (jrinv.east) {};
    \node [t, right] at (3, 163) {\tRegtext{Cuebids:\ }\regtext{\overcallcuetext}};
    \guideline{14.5}{34}{161.5}
    \node [t, right] at (35, 162.8) (occus) {\tRegtext{Support\,}};
    \checkbox{occus} at (occus.east) {};
    \node [t, right] at (3, 159.5) {\tRedreg{Other:\ }\redreg{\overcallothertext}};
    \rguideline{12.5}{49}{158}

%Defense vs. NT:
    % first set
    \node [t, right] at (53.5, 189) {\tBoldtext{Vs:}};
    \node [t, right] at (53, 185) {\tRegtext{Dbl\ }};
    \node [t, right] at (53, 181) {\tRegtext{2\,\c\ }};
    \node [t, right] at (53, 177) {\tRegtext{2\,\rd\ }};
    \node [t, right] at (53, 173) {\tRegtext{2\,\rh\ }};
    \node [t, right] at (53, 169) {\tRegtext{2\,\s\ }};
    \node [t, right] at (52.5, 165) {\tRegtext{2NT\ }};
    \node [t] at (68, 189) {\boldtext{\firstcondition}};
	\guideline{59}{76}{187.5}
    \node [t, right] at (58, 185) {\regtext{\firstvsdbl}};
	\guideline{59}{76}{183.5}
    \node [t, right] at (58, 181) {\regtext{\firstvstwocl}};
	\guideline{59}{76}{179.5}
    \node [t, right] at (58, 177) {\regtext{\firstvstwodi}};
	\guideline{59}{76}{175.5}
    \node [t, right] at (58, 173) {\regtext{\firstvstwohe}};
	\guideline{59}{76}{171.5}
    \node [t, right] at (58, 169) {\regtext{\firstvstwosp}};
	\guideline{59}{76}{167.5}
    \node [t, right] at (58, 165) {\regtext{\firstvstwont}};
	\guideline{59}{76}{163.5}

    % second set if exists, else remove headers and extend guidelines
    \ifthenelse{\equal{\secondcondition}{}}{
        \guideline{76}{100}{183.5}
        \guideline{76}{100}{179.5}
        \guideline{76}{100}{175.5}
        \guideline{76}{100}{171.5}
        \guideline{76}{100}{167.5}
        \guideline{76}{100}{163.5}
    }{
        \node [t, right] at (76.5, 189) {\tBoldtext{Vs:}};
        \node [t, right] at (76, 185) {\tRegtext{Dbl\ }};
        \node [t, right] at (76, 181) {\tRegtext{2\,\c\ }};
        \node [t, right] at (76, 177) {\tRegtext{2\,\rd\ }};
        \node [t, right] at (76, 173) {\tRegtext{2\,\rh\ }};
        \node [t, right] at (76, 169) {\tRegtext{2\,\s\ }};
        \node [t, right] at (75.5, 165) {\tRegtext{2NT\ }};
        \node [t] at (91, 189) {\boldtext{\secondcondition}};
    	\guideline{83}{100}{187.5}
        \node [t, right] at (82, 185) {\regtext{\secondvsdbl}};
    	\guideline{83}{100}{183.5}
        \node [t, right] at (82, 181) {\regtext{\secondvstwocl}};
    	\guideline{83}{100}{179.5}
        \node [t, right] at (82, 177) {\regtext{\secondvstwodi}};
        \guideline{83}{100}{175.5}
        \node [t, right] at (82, 173) {\regtext{\secondvstwohe}};
        \guideline{83}{100}{171.5}
        \node [t, right] at (82, 169) {\regtext{\secondvstwosp}};
        \guideline{83}{100}{167.5}
        \node [t, right] at (82, 165) {\regtext{\secondvstwont}};
        \guideline{83}{100}{163.5}
    }

    \node [t, right] at (52.5, 160) (othernt) {\tRedreg{Other:\ }\redreg{\othernt}};
	\rguideline{61}{100}{158.5}

%Direct cuebid
    \node [t, right] at (10, 152) {\tRegtext{Vs:}};
    \node [t] at (21, 154) {\tRegtext{Art}};
    \node [t] at (21, 150) {\tRegtext{\c\,\rd}};
    \node [t] at (28, 154) {\tRegtext{Quasi}};
    \node [t] at (28, 150) {\tRegtext{\c\,\rd}};
    \node [t] at (35, 154) {\tRegtext{Nat}};
    \node [t] at (35, 150) {\tRegtext{\c\,\rd}};
    \node [t] at (45, 154) {\tRegtext{Nat}};
    \node [t] at (45, 150) {\tRegtext{\rh\,\s}};

    \node [t, right] at (3, 145) {\tRegtext{Michaels}};
    \node [t, right] at (3, 141) {\tRegtext{Natural}};
    \node [t, right] at (3, 137) {\tRegtext{Other}};
    \node [t, right] at (3, 131.5) {\tRedreg{Describe:\ }\redreg{\cuebiddescribe}};
	\rguideline{15}{49}{130}

    \checkbox{qamim} at (21, 145) {};
    \checkbox{qamin} at (21, 141) {};
    \checkbox{qamio} at (21, 137) {};
    \checkbox{qqmim} at (28, 145) {};
    \checkbox{qqmin} at (28, 141) {};
    \checkbox{qqmio} at (28, 137) {};
    \checkbox{qnmim} at (35, 145) {};
    \rcheckbox{qnmin} at (35, 141) {};
    \rcheckbox{qnmio} at (35, 137) {};
    \checkbox{qnmam} at (45, 145) {};
    \rcheckbox{qnman} at (45, 141) {};
    \rcheckbox{qnmao} at (45, 137) {};

%Over Opp's takeout double:
    \node [t, right] at (53, 155) (nsf2l) {\tRegtext{New Suit F:\ \ 2 Lvl\,}};
    \checkbox{nsf2l} at (nsf2l.east) (nsf2lbox) {};
    \node [t, right] at (nsf2lbox.east) (xnstf) {\tBluereg{Tfr\,}};
    \bcheckbox{xnstf} at (xnstf.east) (xnstfbox) {};
    \node [t, right] at (xnstfbox.east) {\bluereg{\toxtrftext}};
	\bguideline{84.5}{100}{153.5}

    \node [t, right] at (53, 151) (jswea) {\tRegtext{Jump Shift: Wk\,}};
    \checkbox{jswea} at (jswea.east) (jsweabox) {};
    \node [t, right] at (jsweabox.east) (jsinv) {\tRegtext{Inv\,}};
    \checkbox{jsinv} at (jsinv.east) (jsinvbox) {};
    \node [t, right] at (jsinvbox.east) (jsfor) {\tRegtext{F\,}};
    \checkbox{jsfor} at (jsfor.east) (jsforbox) {};
    \node [t, right] at (jsforbox.east) (jsfit) {\tRedreg{Fit\,}};
    \rcheckbox{jsfit} at (jsfit.east) {};

    \node [t, right] at (53, 147) (xximp) {\tRegtext{Rdbl: 10+\,}};
    \checkbox{xximp} at (xximp.east) (xximpbox) {};
    \node [t, right] at (xximpbox.east) (xxconv) {\tRedreg{Conv\,}};
    \rcheckbox{xxcon} at (xxconv.east) (xxconvbox) {};
    \node [t, right] at (xxconvbox.east) {\redreg{\xxtext}};
	\rguideline{80}{100}{145.5}

    \node [t, right] at (54, 143) {\tRegtext{2NT Over:}};
    \node [t] at (70, 143) {\tRegtext{Nat}};
    \node [t] at (78, 143) {\tRegtext{Raise}};
    \node [t] at (88, 143) {\tRegtext{Range}};
    \node [t, right] at (56, 139) {\tBoldtext{\c\,\rd}};
    \node [t, right] at (56, 135) {\tBoldtext{\rh\,\s}};

    \checkbox{minnt} at (70, 139) {};
    \rcheckbox{minrs} at (78, 139) {};
    \node [t] at (84, 139) {\boldtext{\xtwontminormin}};
	\guideline{82}{87}{137.5}
    \node [t] at (88, 139) {\tRegtext{to}};
    \node [t] at (92, 139) {\boldtext{\xtwontminormax}};
	\guideline{90}{95}{137.5}
    \checkbox{majnt} at (70, 135) {};
    \rcheckbox{majrs} at (78, 135) {};
    \node [t] at (84, 135) {\boldtext{\xtwontmajormin}};
	\guideline{82}{87}{133.5}
    \node [t] at (88, 135) {\tRegtext{to}};
    \node [t] at (92, 135) {\boldtext{\xtwontmajormax}};
	\guideline{90}{95}{133.5}

    \node [t, right] at (53, 131.5) (toxother) {\tRedreg{Other:\ }\redreg{\toxothertext}};
	\rguideline{62}{100}{130}

%Preempts
    \node [t, right] at (3, 126.5) (threeprestyle) {\tRegtext{3-Lvl Style (Seat/Vul):\ }\regtext{\threelevelstyletop}};
	\guideline{27.5}{49}{125}
    \node [t, right] at (3, 122.5) {\regtext{\threelevelstylebottom}};
	\guideline{5}{49}{121}
    \node [t, right] at (3, 118.5) (threeprerest) {\tRegtext{Resp:\ }\regtext{\threelevelresp}};
	\guideline{11}{49}{117}

    \node [t, right] at (3, 113.5) (fourprestyle) {\tRegtext{4-Lvl Style:\ }\regtext{\fourlevelstyle}};
	\guideline{17}{49}{112}
    \node [t, right] at (3, 109.5) (fourpreresp) {\tRegtext{Resp:\ }\regtext{\fourlevelresp}};
	\guideline{11}{49}{108}
    \node [t, right] at (3, 105.5) (namya) {\tBluereg{4\,\bc /4\,\rd\ Tfr\,}};
    \bcheckbox{namya} at (namya.east) (namyabox) {};
    \node [t, right] at (namyabox.east) {\tRedreg{Other:\ }\redreg{\fourlevelother}};
	\rguideline{26}{49}{104}

%Vs. Opening Preempts
    \node [t, right] at (53, 127) {\tRegtext{2NT Overcall:\ }\regtext{\optwontoc}};
	\guideline{70}{100}{125.5}
    \node [t, right] at (53, 122.5) {\tRegtext{T/O Dbl Thru}};
    \node [t] at (77, 122.5) {\boldtext{\opdtothru}};
	\guideline{70}{84}{121}
    \node [t, right] at (85, 122.5) (oppen) {\tRedreg{Penalty\,}};
    \rcheckbox{oppen} at (oppen.east) {};
    \node [t, right] at (53, 118) (opleb) {\tRedreg{2NT Lebensohl Resp\,}};
    \rcheckbox{opleb} at (opleb.east) (oplebbox) {};
    \node [t, right] at (oplebbox.east) {\redreg{\oplebtext}};
	\rguideline{82}{100}{116.5}
    \node [t, right] at (53, 113.5) (opcue) {\tRegtext{Cuebid:\ }\regtext{\opcuebid}};
	\guideline{63}{100}{112}
    \node [t, right] at (53, 109.5) (opjumpoc) {\tRegtext{Jump Overcalls:\ }\regtext{\opjumpoc}};
	\guideline{72}{100}{108}
    \node [t, right] at (53, 105.5) (opother) {\tRedreg{Other:\ }\redreg{\opothertext}};
	\rguideline{62}{100}{104}

%Slam conventions
    \node [t, right] at (3, 101) (gednt) {\tRegtext{4\,\c\ Gerber: Directly over NT\,}};
    \checkbox{gednt} at (gednt.east) (gedntbox) {};
    \node [t, right] at (gedntbox.east) (geseq) {\tRegtext{Over NT Seq\,}};
    \checkbox{geseq} at (geseq.east) (geseqbox) {};
    \node [t, right] at (geseqbox.east) (genon) {\tRegtext{Non-NT Seq\,}};
    \checkbox{genon} at (genon.east) (genonbox) {};
    \node [t, right] at (genonbox.east) {\regtext{\gerbertext}};
	\guideline{77}{100}{99.5}
    \node [t, right] at (3, 97) (black) {\tRegtext{4NT: 0123\,}};
    \checkbox{black} at (black.east) (blackbox) {};
    \node [t, right] at (blackbox.east) (b0314) {\tRegtext{0314\,}};
    \checkbox{b0314} at (b0314.east) (b0314box) {};
    \node [t, right] at (b0314box.east) (b1430) {\tRegtext{1430\,}};
    \checkbox{b1430} at (b1430.east) (b1430box) {};
    \node [t, right] at (b1430box.east) {\regtext{\blackwoodtext}};
	\guideline{40}{100}{95.5}
    \node [t, right] at (3, 93) {\tRegtext{Control Bids: }\regtext{\controlcuetext}};
	\guideline{19}{100}{91.5}
    \node [t, right] at (3, 89) {\tRegtext{Vs. Interference: }\regtext{\slaminterftext}};
	\guideline{23}{100}{87.5}
    \node [t, right] at (3, 85) {\tRegtext{Other: }\regtext{\slamothertext}};
	\guideline{12}{100}{83.5}

%Carding
    \node [t] at (7, 80) {\tRegtext{Suits}};
    \checkbox{stasu} at (7, 77) {};
    \checkbox{stcsu} at (7, 74) {};
    \checkbox{udasu} at (7, 71) {};
    \checkbox{udcsu} at (7, 68) {};
    \node [t] at (45, 80) {\tRegtext{NT}};
    \checkbox{stant} at (45, 77) {};
    \checkbox{stcnt} at (45, 74) {};
    \checkbox{udant} at (45, 71) {};
    \checkbox{udcnt} at (45, 68) {};
    \node [t] at (26, 77) {\tRegtext{Standard -- Attitude}};
    \node [t] at (26, 74) {\tRegtext{Standard -- Count}};
    \node [t] at (26, 71) {\tRegtext{Upside Down -- Attitude}};
    \node [t] at (26, 68) {\tRegtext{Upside Down -- Count}};

    \node [t, right] at (3, 64.5)  {\tRegtext{Exceptions:\ }\regtext{\cardexcepttext}};
	\guideline{17}{49}{63}
    \node [t, right] at (3, 61) {\tRegtext{Other Carding:}};
    \node [t, right] at (3, 57) (smith) {\tRegtext{Smith Echo: Suits:\,}};
    \checkbox{smisu} (smisubox) at (smith.east) {};
    \node [t, right] at (smisubox.east) (smint) {\tRegtext{NT\,}};
    \checkbox{smint} at (smint.east) (smintbox) {};
    \node [t, right] at (smintbox.east) (smirv) {\tRegtext{Reverse\,}};
    \checkbox{smirv} at (smirv.east) {};
    \node [t, right] at (5, 53) {\regtext{\othercardingtext}};
	\guideline{6}{49}{51.5}
    \node [t, right] at (3, 49) {\tRegtext{Trump Signals:\ }\regtext{\trumpsignaltext}};
	\guideline{21}{49}{47.5}

% Signals
    \node [t] at (77.5, 80) {\tRegtext{Primary Signals to:}};
    \node [t] at (63, 77) {\tRegtext{Declarer's Lead}};
    \checkbox{deatt} at (63, 74) {};
    \checkbox{decou} at (63, 71) {};
    \checkbox{desui} at (63, 68) {};
    \node [t] at (63, 74.3) {\regtext{\tiny{\deattrank}}};
    \node [t] at (63, 71.3) {\regtext{\tiny{\decourank}}};
    \node [t] at (63, 68.3) {\regtext{\tiny{\desuirank}}};
    \node [t] at (92, 77) {\tRegtext{Partner's Lead}};
    \checkbox{pratt} at (92, 74) {};
    \checkbox{prcou} at (92, 71) {};
    \checkbox{prsui} at (92, 68) {};
    \node [t] at (92, 74.3) {\regtext{\tiny{\prattrank}}};
    \node [t] at (92, 71.3) {\regtext{\tiny{\prcourank}}};
    \node [t] at (92, 68.3) {\regtext{\tiny{\prsuirank}}};
    \node [t] at (77.5, 74) {\tRegtext{Attitude}};
    \node [t] at (77.5, 71) {\tRegtext{Count}};
    \node [t] at (77.5, 68) {\tRegtext{Suit Preference}};
    \node [t, right] at (53, 64.5)  {\tRegtext{Exceptions:\ }\regtext{\signalexcepttext}};
	\guideline{67.5}{100}{63}
    \node [t, right] at (53, 60.5) (std1d) {\tRegtext{First Discard: Std\,}};
    \checkbox{std1d} at (std1d.east) (std1dbox) {};
    \node [t, right] at (std1dbox.east) (udn1d) {\tRegtext{Upside Down\,}};
    \checkbox{udn1d} at (udn1d.east) {};
    \node [t, right] at (60, 57) (lav1d) {\tRegtext{Lavinthal\,}};
    \checkbox{lav1d} (lav1dbox) at (lav1d.east) {};
    \node [t, right] (odd1d) at (lav1dbox.east) {\tRegtext{Odd/Even\,}};
    \checkbox{odd1d} (odd1dbox) at (odd1d.east) {};
    \node [t, right] (oth1d) at (odd1dbox.east) {\tRegtext{Other\,}};
    \checkbox{oth1d} at (oth1d.east) {};

    \node [t, right] at (53, 53) {\regtext{\signaltexttop}};
	\guideline{54}{100}{51.5}
    \node [t, right] at (53, 49) {\regtext{\signaltextbottom}};
	\guideline{54}{100}{47.5}

%Leads vs suits

    \node [t, right] at (3, 44) (su4th) {\tRegtext{Length Leads: 4\textsuperscript{th}}};
    \checkbox{su4th} at (su4th.east) (su4thbox) {};
    \node [t, right, xshift=-0.5mm] at (su4thbox.east) (su3rd) {\tRegtext{3\textsuperscript{rd}/5\textsuperscript{th}}};
    \checkbox{su3rd} at (su3rd.east) (su3rdbox)  {};
    \node [t, right, xshift=-0.5mm] at (su3rdbox.east) (su3lo) {\tRegtext{3\textsuperscript{rd}/Low}};
    \checkbox{su3lo} at (su3lo.east) {};
    \node [t, right] at (10, 40) (suatt) {\tRegtext{Attitude\,}};
    \checkbox{suatt} at (suatt.east) (suattbox) {};
    \node [t, right] at (suattbox.east) (susxx) {\tRegtext{Small from xx\,}};
    \checkbox{susxx} at (susxx.east) {};

% format: \showlead{list of cards}{bold cards}{red cards}{circled cards}{x}{y}
    \showlead{x,x}{1}{}{\suitxx}{5}{36}
    \showlead{x,x,x}{1}{}{\suitxxx}{13}{36}
    \showlead{x,x,x,x}{}{}{\suitxxxx}{23}{36}
    \showlead{x,x,x,x,x}{1}{}{\suitxxxxx}{35}{36}
    \showlead{H,x,x}{}{}{\suitHxx}{5}{32}
    \showlead{H,x,x,x}{}{}{\suitHxxx}{16}{32}
    \showlead{H,x,x,x,x}{}{}{\suitHxxxx}{30}{32}

    \node [t, right] at (3, 28) (sua1t) {\tRegtext{After 1\textsuperscript{st} Trick:\ }\regtext{\suitafterfirst}};
	\guideline{20}{49}{26.5}

    \node [t, right] at (3, 23.5) {\tRegtext{Honour Leads:}};
    \showlead{A,K,x,(+)}{}{}{\AKx}{5}{19}
    \node [t, right] at (17, 19) (suakv) {\tRegtext{Varies\,}};
    \checkbox{suakv} at (suakv.east) (suakvbox) {};
    \node [t, right] at (suakvbox.east) {\regtext{\suitAKxvaries}};
	\guideline{29}{49}{17.5}
    \showlead{K,Q,x}{1}{}{\KQx}{5}{15}
    \showlead{Q,J,x}{1}{}{\QJx}{16}{15}
    \showlead{J,T,x}{1}{}{\JTx}{27}{15}
    \showlead{T,9,x}{1}{}{\TNx}{38}{15}
    \showlead{K,J,T,x}{2}{}{\KJTx}{5}{11}
    \showlead{K,T,9,x}{2}{}{\KTNx}{20}{11}
    \showlead{Q,T,9,x}{2}{}{\suitQTNx}{35}{11}

    \node [t, right] at (3, 7) {\tRegtext{Exceptions:\ }\regtext{\suitexcepttop}};
	\guideline{17}{49}{5.5}
    \node [t, right] at (5, 3) {\regtext{\suitexceptbottom}};
	\guideline{6}{49}{1.5}

%Leads vs NT

    \node [t, right] at (53, 44) (nt4th) {\tRegtext{Length Leads: 4\textsuperscript{th}}};
    \checkbox{nt4th} at (nt4th.east) (nt4thbox) {};
    \node [t, right, xshift=-0.5mm] at (nt4thbox.east) (nt3rd) {\tRegtext{3\textsuperscript{rd}/5\textsuperscript{th}}};
    \checkbox{nt3rd} at (nt3rd.east) (nt3rdbox)  {};
    \node [t, right, xshift=-0.5mm] at (nt3rdbox.east) (nt3lo) {\tRegtext{3\textsuperscript{rd}/Low}};
    \checkbox{nt3lo} at (nt3lo.east) {};
    \node [t, right] at (60, 40) (ntatt) {\tRegtext{Attitude\,}};
    \checkbox{ntatt} at (ntatt.east) (ntattbox) {};
    \node [t, right] at (ntattbox.east) (nt2xx) {\tRegtext{2\textsuperscript{nd} from xxxx(+)\,}};
    \checkbox{nt2xx} at (nt2xx.east) {};

% format: \showlead{list of cards}{bold cards}{red cards}{circled cards}{x}{y}
    \showlead{x,x}{1}{}{\ntxx}{55}{36}
    \showlead{x,x,x}{1}{}{\ntxxx}{63}{36}
    \showlead{x,x,x,x}{}{}{\ntxxxx}{73}{36}
    \showlead{x,x,x,x,x}{1}{}{\ntxxxxx}{85}{36}
    \showlead{H,x,x}{}{}{\ntHxx}{55}{32}
    \showlead{H,x,x,x}{}{}{\ntHxxx}{70}{32}
    \showlead{H,x,x,x,x}{}{}{\ntHxxxx}{83}{32}

    \node [t, right] at (53, 28) (nta1t) {\tRegtext{After 1\textsuperscript{st} Trick:\ }\regtext{\ntafterfirst}};
	\guideline{70}{100}{26.5}

    \node [t, right] at (53, 23.5) {\tRegtext{Honour Leads:}};
    \showlead{A,K,x,x,(+)}{}{}{\AKxx}{55}{19}
    \node [t, right] at (68, 19) (ntakv) {\tRegtext{Varies\,}};
    \checkbox{ntakv} at (ntakv.east) (ntakvbox) {};
    \node [t, right] at (ntakvbox.east) {\regtext{\ntAKxvaries}};
	\guideline{81}{100}{17.5}
    \showlead{K,Q,J,x}{1}{}{\KQJx}{55}{15}
    \showlead{K,Q,T,9}{2}{}{\ntKQTN}{66}{15}
    \showlead{Q,J,T,x}{1}{}{\QJTx}{77}{15}
    \showlead{J,T,9,x}{1}{}{\JTNx}{88}{15}
    \showlead{A,Q,J,x}{2}{}{\AQJx}{55}{11}
    \showlead{A,J,T,x}{2}{}{\AJTx}{66}{11}
    \showlead{K,T,9,x}{2}{}{\ntKTNx}{77}{11}
    \showlead{Q,T,9,x}{2}{}{\ntQTNx}{88}{11}

    \node [t, right] at (53, 7) {\tRegtext{Exceptions:\ }\regtext{\ntexcepttop}};
	\guideline{67}{100}{5.5}
    \node [t, right] at (55, 3) {\regtext{\ntexceptbottom}};
	\guideline{55}{100}{1.5}

    \node [right] at (3,-2) {\scriptsize \textsf{\currfilename: \printfdate{ISOext}. Back of Convention Card}};
    \node [right] at (58,-2) {\scriptsize \textsf{Made with \LaTeX\ and acbl2022cc (github.com/mycroftw/conv-cards)}};
    \additionaltikz %optional extra user-defined fields
    \end{tikzpicture}%
}%end of \drawconventioncard
